from django.test import TestCase
from creditcards.utils import luhn
from creditcards import types


class CCTypesTest(TestCase):
    def test_cc_types(self):
        tests = {
            types.CC_TYPE_AMEX: [
                '378282246310005',
                '371449635398431',
                '378734493671000',
                '343434343434343',
                '371144371144376',
                '341134113411347',
            ],
            types.CC_TYPE_DINERS: [
                '30569309025904',
                '38520000023237',
                '36438936438936',
                '36110361103612',
                '36111111111111',
            ],
            types.CC_TYPE_DISCOVER: [
                '6011111111111117',
                '6011000990139424',
                '6500000000000002',
            ],
            types.CC_TYPE_ELO: [
                '4312741111111112',
                '4514161111111119',
                '5067001446391275',
                '5090111111111113',
                '6277801111111112',
                '6362970000457013',
            ],
            types.CC_TYPE_JCB: [
                '3530111333300000',
                '3566002020360505',
                '3528000000000007',
            ],
            types.CC_TYPE_MASTERCARD: [
                '5555555555554444',
                '5105105105105100',
                '2222400061240016',
                '2223000048400011',
                '5478050000000007',
            ],
            types.CC_TYPE_VISA: [
                '4111111111111111',
                '4012888888881881',
                '4222222222222',
                '4532261615476013542',
            ],
            types.CC_TYPE_UNIONPAY: [
                '6247130048162403',
                '622384452162063648',
            ],
            types.CC_TYPE_MIR: [
                '2204883716636153',
                '2200111234567898',
                '2200481349288130',
            ],
            types.CC_TYPE_GENERIC: [
                '0000000000000000',
                '1111111111111117',
                '3060000000000001',
                '3072222222222223',
                '3111111111111113',
                '3200000000000002',
                '3300000000000001',
                '3510000000000007',
                '3527000000000008',
                '3590000000000000',
                '5000000000000009',
                '5600000000000003',
                '5700000000000002',
                '5800000000000001',
                '5900000000000000',
                '6000000000000007',
                '6020000000000003',
                '6030000000000001',
                '6040000000000009',
                '6050000000000006',
                '6060000000000004',
                '6070000000000002',
                '6080000000000000',
                '6090000000000008',
                '6100000000000006',
                '6300000000000004',
                '6400000000000003',
                '6410000000000001',
                '6420000000000009',
                '6430000000000007',
                '6600000000000001',
                '6700000000000000',
                '6800000000000009',
                '6900000000000008',
                '7000000000000005',
                '7000700070007000',
                '8000000000000003',
                '9000000000000001',
            ]
        }
        for code, numbers in tests.items():
            for number in numbers:
                with self.subTest(number):
                    self.assertTrue(luhn(number))
                    self.assertEqual(code, types.get_type(number))
